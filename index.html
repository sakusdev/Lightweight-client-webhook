<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Discord Webhook é€ä¿¡ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      background: #f8f9fa;
    }
    input, button {
      margin: 5px 0;
      padding: 8px;
      width: 100%;
    }
    button {
      width: 49%;
    }
  </style>
</head>
<body>
  <h1>ğŸ’¬ Discord Webhook å®šæœŸé€ä¿¡ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ</h1>

  <label>
    Webhook URL:
    <input type="text" id="webhookUrl" placeholder="https://discord.com/api/webhooks/..." />
  </label>

  <label>
    ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å†…å®¹:
    <input type="text" id="message" value="ã“ã‚“ã«ã¡ã¯ã€Discord!" />
  </label>

  <label>
    é€ä¿¡é–“éš”ï¼ˆç§’ï¼‰:
    <input type="number" id="interval" value="10" min="1" />
  </label>

  <div>
    <button onclick="start()">â–¶ é€ä¿¡é–‹å§‹</button>
    <button onclick="stop()">â¹ åœæ­¢</button>
  </div>

  <p id="status">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: åœæ­¢ä¸­</p>

  <script>
    let timerId = null;

    function sendMessage() {
      const url = document.getElementById('webhookUrl').value;
      const message = document.getElementById('message').value;
      if (!url || !message) {
        alert("Webhook URLã¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");
        return;
      }

      fetch(url, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ content: message })
      }).then(res => {
        if (!res.ok) {
          document.getElementById("status").textContent = "ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: ã‚¨ãƒ©ãƒ¼ï¼ˆ" + res.status + "ï¼‰";
        }
      }).catch(err => {
        console.error(err);
        document.getElementById("status").textContent = "ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: é€ä¿¡ã‚¨ãƒ©ãƒ¼";
      });
    }

    function start() {
      if (timerId) {
        alert("ã™ã§ã«é€ä¿¡ä¸­ã§ã™ã€‚");
        return;
      }

      const intervalSec = parseInt(document.getElementById("interval").value, 10);
      if (isNaN(intervalSec) || intervalSec <= 0) {
        alert("é–“éš”ã¯1ä»¥ä¸Šã®æ•°å­—ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");
        return;
      }

      sendMessage(); // ã¾ãš1å›å³é€ä¿¡
      timerId = setInterval(sendMessage, intervalSec * 1000);
      document.getElementById("status").textContent = "ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: é€ä¿¡ä¸­ï¼ˆ" + intervalSec + "ç§’ã”ã¨ï¼‰";
    }

    function stop() {
      if (timerId) {
        clearInterval(timerId);
        timerId = null;
        document.getElementById("status").textContent = "ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: åœæ­¢ä¸­";
      }
    }
  </script>
</body>
</html>
