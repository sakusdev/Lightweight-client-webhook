<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>Discord Webhook è¤‡æ•°åŒæ™‚é€ä¿¡ãƒ„ãƒ¼ãƒ«</title>
  <style>
    body { font-family: sans-serif; padding: 2em; max-width: 600px; margin: auto; }
    input, textarea, select, button { width: 100%; margin-top: 10px; padding: 8px; box-sizing: border-box; }
    .row { display: flex; gap: 10px; }
    .row > * { flex: 1; }
    label { margin-top: 15px; display: block; }
  </style>
</head>
<body>
  <h2>ğŸ“¨ Discord Webhook è¤‡æ•°åŒæ™‚é€ä¿¡ãƒ„ãƒ¼ãƒ«</h2>

  <label>Webhook URLé¸æŠ:</label>
  <select id="webhookSelect"></select>
  <input id="webhookUrl" type="text" placeholder="https://discord.com/api/webhooks/..." />

  <label>
    <input type="checkbox" id="sendAll" />
    å…¨ã¦ã®Webhookã«é€ä¿¡ã™ã‚‹
  </label>

  <label>ãƒ¦ãƒ¼ã‚¶ãƒ¼å:</label>
  <input id="username" type="text" placeholder="Botå" />

  <label>ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å†…å®¹:</label>
  <textarea id="content" rows="3" placeholder="ã“ã“ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›"></textarea>

  <label>Embed ã‚¿ã‚¤ãƒˆãƒ«:</label>
  <input id="embedTitle" type="text" placeholder="ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆåŸ‹ã‚è¾¼ã¿ã‚¿ã‚¤ãƒˆãƒ«ï¼‰" />

  <label>Embed èª¬æ˜:</label>
  <textarea id="embedDesc" rows="2" placeholder="ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆèª¬æ˜æ–‡ï¼‰"></textarea>

  <label>ãƒ«ãƒ¼ãƒ—é–“éš”ï¼ˆç§’ï¼‰:</label>
  <input id="interval" type="number" min="1" value="10" />

  <div class="row">
    <button id="sendOnce">ğŸ“¤ ä¸€åº¦ã ã‘é€ä¿¡</button>
    <button id="toggleLoop">ğŸ” ãƒ«ãƒ¼ãƒ—é–‹å§‹</button>
  </div>

  <script>
    let intervalId = null;
    const select = document.getElementById('webhookSelect');
    const urlInput = document.getElementById('webhookUrl');

    // Webhookä¸€è¦§ï¼ˆã“ã“ã«å¿…è¦ã«å¿œã˜ã¦è¿½åŠ ã—ã¦ãã ã•ã„ï¼‰
    const webhooks = {
      "ãƒ†ã‚¹ãƒˆ1": "https://discord.com/api/webhooks/XXXX/AAA",
      "ãƒ†ã‚¹ãƒˆ2": "https://discord.com/api/webhooks/YYYY/BBB"
    };

    // ã‚»ãƒ¬ã‚¯ãƒˆãƒœãƒƒã‚¯ã‚¹ã«Webhookã‚’è¿½åŠ 
    for (const name in webhooks) {
      const opt = document.createElement('option');
      opt.value = webhooks[name];
      opt.textContent = name;
      select.appendChild(opt);
    }

    // é¸æŠå¤‰æ›´ã§URLæ¬„ã‚’æ›´æ–°
    select.addEventListener('change', () => {
      urlInput.value = select.value;
    });
    select.dispatchEvent(new Event('change'));

    function sendWebhook() {
      const content = document.getElementById('content').value;
      const username = document.getElementById('username').value;
      const embedTitle = document.getElementById('embedTitle').value;
      const embedDesc = document.getElementById('embedDesc').value;
      const sendAll = document.getElementById('sendAll').checked;

      if (!content && !embedTitle && !embedDesc) {
        alert('ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‹Embedã®ã©ã¡ã‚‰ã‹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
        return;
      }

      const payload = {
        username,
        content,
        embeds: []
      };

      if (embedTitle || embedDesc) {
        payload.embeds.push({
          title: embedTitle || undefined,
          description: embedDesc || undefined,
          color: 0x00bfff
        });
      }

      const urls = sendAll ? Object.values(webhooks) : [urlInput.value];

      urls.forEach(url => {
        if (!url) return;
        fetch(url, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        })
          .then(res => {
            if (!res.ok) alert(`é€ä¿¡å¤±æ•—: ${url} - ${res.statusText}`);
          })
          .catch(err => alert(`ã‚¨ãƒ©ãƒ¼: ${url} - ${err}`));
      });
    }

    document.getElementById('sendOnce').onclick = sendWebhook;

    document.getElementById('toggleLoop').onclick = function () {
      if (intervalId) {
        clearInterval(intervalId);
        intervalId = null;
        this.textContent = 'ğŸ” ãƒ«ãƒ¼ãƒ—é–‹å§‹';
      } else {
        const intervalSec = parseInt(document.getElementById('interval').value);
        if (isNaN(intervalSec) || intervalSec < 1) {
          alert('æœ‰åŠ¹ãªç§’æ•°ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
          return;
        }
        intervalId = setInterval(sendWebhook, intervalSec * 1000);
        this.textContent = 'â¹ï¸ ãƒ«ãƒ¼ãƒ—åœæ­¢';
      }
    };
  </script>
</body>
</html>
